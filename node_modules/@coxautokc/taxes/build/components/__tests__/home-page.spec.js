"use strict";

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _enzyme = require("enzyme");

var _enzyme2 = _interopRequireDefault(_enzyme);

var _enzymeToJson = require("enzyme-to-json");

var _enzymeToJson2 = _interopRequireDefault(_enzymeToJson);

var _enzymeAdapterReact = require("enzyme-adapter-react-15");

var _enzymeAdapterReact2 = _interopRequireDefault(_enzymeAdapterReact);

var _sinon = require("sinon");

var _sinon2 = _interopRequireDefault(_sinon);

var _homePage = require("../home-page");

var _homePage2 = _interopRequireDefault(_homePage);

var _FullPageModal = require("@coxautokc/fusion-ui-components/lib/FullPageModal");

var _FullPageModal2 = _interopRequireDefault(_FullPageModal);

var _chai = require("chai");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var props = {
  currentTab: 2,
  feeTaxSetup: { data: [] },
  fetchFeeTaxData: function fetchFeeTaxData() {},
  fetchTaxData: function fetchTaxData() {},
  isDisabled: false,
  closeDialog: _sinon2.default.spy(),
  dialogStatus: true,
  populateValue: _sinon2.default.spy(),
  name: "taxes",
  noTaxes: false,
  profile: null,
  state: "",
  taxSetup: {},
  updateCurrentTab: function updateCurrentTab() {},
  updateEditTaxProfileInput: function updateEditTaxProfileInput() {},
  updateTaxSetupInput: function updateTaxSetupInput() {},
  zipcode: ""
};

_enzyme2.default.configure({ adapter: new _enzymeAdapterReact2.default() });

describe("HomePage", function () {
  var component = void 0;

  afterEach(function (done) {
    props.closeDialog.reset();
    props.populateValue.reset();
    done();
  });

  it("renders <HomePage />", function () {
    component = (0, _enzyme.shallow)(_react2.default.createElement(_homePage2.default, props));
    expect((0, _enzymeToJson2.default)(component)).toMatchSnapshot();
  });

  it("saves the content when button is clicked", function () {
    component = (0, _enzyme.shallow)(_react2.default.createElement(_homePage2.default, props));
    var footer = (0, _enzyme.shallow)(component.find(_FullPageModal2.default).prop("footer"));
    footer.findWhere(function (b) {
      return b.prop("className") === "save-btn";
    }).shallow().simulate("click");
    (0, _chai.assert)(props.populateValue.calledWith(props.name, "0"));
    (0, _chai.assert)(props.closeDialog.calledOnce);
  });
});